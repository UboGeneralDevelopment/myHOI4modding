on_actions = {
	on_daily = {
		effect = {
			if = {
				limit = {
					any_other_country = {
						has_war_with = ROOT
						NOT = { has_country_flag = has_war_with_@ROOT }
					}
				}
				every_other_country = {
					limit = {
						has_war_with = ROOT
						NOT = { has_country_flag = has_war_with_@ROOT }
					}
					set_country_flag = has_war_with_@ROOT
				}
			}
			if = {
				limit = {
					any_other_country = {
						NOT = { has_war_with = ROOT }
						has_country_flag = has_war_with_@ROOT
					}
				}
				every_other_country = {
					limit = {
						NOT = { has_war_with = ROOT }
						has_country_flag = has_war_with_@ROOT
					}
					clr_country_flag = has_war_with_@ROOT
				}
			}
			
			if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions > 0 }
				}
				if = {
					limit = {
						check_variable = { duration_of_1_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_1_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_1_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_1
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_2_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_2_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_2_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_2
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_3_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_3_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_3_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_3
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_4_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_4_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_4_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_4
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_5_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_5_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_5_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_5
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_6_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_6_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_6_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_6
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_7_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_7_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_7_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_7
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_8_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_8_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_8_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_8
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_9_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_9_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_9_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_9
							}
						}
					}
				}
				if = {
					limit = {
						check_variable = { duration_of_10_league_of_nations_trade_sanction > 0 }
					}
					subtract_from_variable = { duration_of_10_league_of_nations_trade_sanction = 1 }
					if = {
						limit = {
							check_variable = { duration_of_10_league_of_nations_trade_sanction < 1 }
						}
						subtract_from_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
						every_country = {
							remove_opinion_modifier = {
								target = ROOT
								modifier = league_of_nations_trade_sanction_modifier_10
							}
						}
					}
				}
			}
			
			if = {
				limit = {
					has_country_flag = leader_of_league_of_nations
				}
				if = {
					limit = {
						check_variable = { global.league_of_nations_voting_time > 0 }
					}
					subtract_from_variable = { global.league_of_nations_voting_time = 1 }
				}
				if = {
					limit = {
						check_variable = { global.time_til_next_possible_league_of_nations_voting > 0 }
					}
					subtract_from_variable = { global.time_til_next_possible_league_of_nations_voting = 1 }
				}
				if = {
					limit = {
						has_global_flag = league_of_nations_focus_active
					}
					if = {
						limit = {
							check_variable = { global.time_til_league_of_nations_focus_is_completed > 0 }
						}
						subtract_from_variable = { global.time_til_league_of_nations_focus_is_completed = 1 }
						add_to_variable = { global.league_of_nations_focus_progress = 1 }
						if = {
							limit = {
								OR = {
									AND = {
										has_global_flag = league_of_nations_focus_7_selected
										NOT = { has_global_flag = league_of_nations_focus_7_completed }
									}
									AND = {
										has_global_flag = league_of_nations_focus_8_selected
										NOT = { has_global_flag = league_of_nations_focus_8_completed }
									}
								}
								check_variable = { global.time_til_league_of_nations_focus_is_completed > 0 }
								has_war = yes
							}
							if = {
								limit = {
									has_global_flag = league_of_nations_focus_7_selected
									NOT = { has_global_flag = league_of_nations_focus_7_completed }
								}
								clr_global_flag = league_of_nations_focus_7_selected
								country_event = { id = league_of_nations_focuses_events.11 }
							}
							else_if = {
								limit = {
									has_global_flag = league_of_nations_focus_8_selected
									NOT = { has_global_flag = league_of_nations_focus_8_completed }
								}
								clr_global_flag = league_of_nations_focus_8_selected
								country_event = { id = league_of_nations_focuses_events.11 }
							}
							clr_global_flag = league_of_nations_focus_active
							set_variable = { global.time_til_league_of_nations_focus_is_completed = 210 }
							set_variable = { global.league_of_nations_focus_progress = 0 }
						}
					}
					if = {
						limit = {
							has_global_flag = league_of_nations_focus_active
							check_variable = { global.time_til_league_of_nations_focus_is_completed < 1 }
						}
						if = {
							limit = {
								has_global_flag = league_of_nations_focus_1_selected
								NOT = { has_global_flag = league_of_nations_focus_1_completed }
							}
							set_global_flag = league_of_nations_focus_1_completed
							country_event = { id = league_of_nations_focuses_events.1 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_2_selected
								NOT = { has_global_flag = league_of_nations_focus_2_completed }
							}
							set_global_flag = league_of_nations_focus_2_completed
							country_event = { id = league_of_nations_focuses_events.2 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_3_selected
								NOT = { has_global_flag = league_of_nations_focus_3_completed }
							}
							set_global_flag = league_of_nations_focus_3_completed
							country_event = { id = league_of_nations_focuses_events.3 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_4_selected
								NOT = { has_global_flag = league_of_nations_focus_4_completed }
							}
							set_global_flag = league_of_nations_focus_4_completed
							country_event = { id = league_of_nations_focuses_events.4 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_5_selected
								NOT = { has_global_flag = league_of_nations_focus_5_completed }
							}
							set_global_flag = league_of_nations_focus_5_completed
							country_event = { id = league_of_nations_focuses_events.5 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_6_selected
								NOT = { has_global_flag = league_of_nations_focus_6_completed }
							}
							set_global_flag = league_of_nations_focus_6_completed
							country_event = { id = league_of_nations_focuses_events.6 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_7_selected
								NOT = { has_global_flag = league_of_nations_focus_7_completed }
							}
							set_global_flag = league_of_nations_focus_7_completed
							country_event = { id = league_of_nations_focuses_events.7 }
						}
						else_if = {
							limit = {
								has_global_flag = league_of_nations_focus_8_selected
								NOT = { has_global_flag = league_of_nations_focus_8_completed }
							}
							set_global_flag = league_of_nations_focus_8_completed
							country_event = { id = league_of_nations_focuses_events.8 }
						}
						clr_global_flag = league_of_nations_focus_active
					}
				}
				if = {
					limit = {
						has_global_flag = league_of_nations_voting
						OR = {
							check_variable = { global.league_of_nations_voting_time < 1 }
							event_target:target_of_league_of_nations_voting = {
								exists = no
							}
						}
					}
					country_event = { id = league_of_nations_events.4 }
				}
				if = {
					limit = {
						check_variable = { global.days_til_next_league_of_nations_election > 0 }
					}
					subtract_from_variable = { global.days_til_next_league_of_nations_election = 1 }
				}
				if = {
					limit = {
						check_variable = { global.days_til_next_league_of_nations_election < 1 }
						NOT = { has_global_flag = league_of_nations_election }
						NOT = { has_global_flag = league_of_nations_voting }
						NOT = { has_global_flag = league_of_nations_focus_6_completed }
					}
					country_event = { id = league_of_nations_events.5 }
				}
				if = {
					limit = {
						has_global_flag = league_of_nations_election
						NOT = {
							any_country = {
								has_country_flag = member_of_league_of_nations
								NOT = { has_country_flag = voted_in_league_of_nations_election }
							}
						}
					}
					country_event = { id = league_of_nations_events.9 }
				}
				if = {
					limit = {
						set_temp_variable = { num_of_total_members_of_league_of_nation = global.num_of_league_of_nations_members }
						divide_temp_variable = { num_of_total_members_of_league_of_nation = 2 }
						check_variable = { global.num_of_league_of_nations_noconfidence_votes > num_of_total_members_of_league_of_nation }
					}
					set_variable = { global.days_til_next_league_of_nations_election = 1 }
					news_event = { id = league_of_nations_news_events.14 hours = 1 }
				}
			}
			
			if = {
				limit = {
					check_variable = { cooldown_for_league_of_nations_voting > 0 }
				}
				subtract_from_variable = { cooldown_for_league_of_nations_voting = 1 }
			}
			if = {
				limit = {
					check_variable = { cooldown_join_league_of_nations > 0 }
				}
				subtract_from_variable = { cooldown_join_league_of_nations = 1 }
			}
			if = {
				limit = {
					check_variable = { war_lost_cooldown_for_start_league_of_nations_voting > 0 }
				}
				subtract_from_variable = { war_lost_cooldown_for_start_league_of_nations_voting = 1 }
			}
			
			if = {
				limit = {
					has_global_flag = league_of_nations_map_mode_active
				}
				if = {
					limit = {
						has_country_flag = leader_of_league_of_nations
					}
					save_cosmetic_tag_before_league_of_nations_map_mode = yes
					set_cosmetic_tag = LEAGUE_OF_NATIONS_LEADER
				}
				if = {
					limit = {
						NOT = { has_country_flag = leader_of_league_of_nations }
						has_country_flag = member_of_league_of_nations
					}
					save_cosmetic_tag_before_league_of_nations_map_mode = yes
					set_cosmetic_tag = LEAGUE_OF_NATIONS_MEMBER
				}
				if = {
					limit = {
						NOT = { has_country_flag = member_of_league_of_nations }
					}
					save_cosmetic_tag_before_league_of_nations_map_mode = yes
					set_cosmetic_tag = NOT_LEAGUE_OF_NATIONS_MEMBER
				}
				if = {
					limit = {
						has_country_flag = started_league_of_nations_voting
					}
					save_cosmetic_tag_before_league_of_nations_map_mode = yes
					set_cosmetic_tag = LEAGUE_OF_NATIONS_STARTER_OF_VOTING
				}
				if = {
					limit = {
						has_country_flag = target_of_league_of_nations_voting
					}
					save_cosmetic_tag_before_league_of_nations_map_mode = yes
					if = {
						limit = {
							has_country_flag = member_of_league_of_nations
						}
						set_cosmetic_tag = LEAGUE_OF_NATIONS_TARGET_OF_VOTING_MEMBER
						else = {
							set_cosmetic_tag = LEAGUE_OF_NATIONS_TARGET_OF_VOTING
						}
					}
				}
			}
			
			if = {
				limit = {
					has_global_flag = GER_anschluss_voting_in_queue
					NOT = { has_global_flag = league_of_nations_voting }
					NOT = { has_global_flag = GER_anschluss_voting_started }
				}
				if = {
					limit = {
						country_exists = GER
						country_exists = MEX
					}
					MEX = {
						country_event = { id = league_of_nations_events.17 days = 5 }
					}
					set_global_flag = GER_anschluss_voting_started
					else = {
						clr_global_flag = GER_anschluss_voting_in_queue
					}
				}
			}
			
			if = {
				limit = {
					has_global_flag = SOV_FIN_voting_triggered
					NOT = { has_global_flag = league_of_nations_voting }
					NOT = { has_global_flag = GER_anschluss_voting_started }
					NOT = { has_global_flag = GER_anschluss_voting_in_queue }
				}
				if = {
					limit = {
						country_exists = SOV
						country_exists = FIN
						NOT = { has_global_flag = SOV_FIN_voting_happened }
					}
					FIN = {
						country_event = { id = league_of_nations_events.19 days = 5 }
					}
					else = {
						clr_global_flag = SOV_FIN_voting_triggered
					}
				}
			}
			
			if = {
				limit = {
					has_country_flag = member_of_league_of_nations
					any_other_country = {
						has_country_flag = member_of_league_of_nations
						NOT = { has_country_flag = league_of_nations_opinion_set_for_@ROOT }
					}
				}
				every_other_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { has_country_flag = league_of_nations_opinion_set_for_@ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_member_opinion
					}
					set_country_flag = league_of_nations_opinion_set_for_@ROOT
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = member_of_league_of_nations }
					any_other_country = {
						has_country_flag = league_of_nations_opinion_set_for_@ROOT
					}
				}
				every_other_country = {
					limit = {
						has_country_flag = league_of_nations_opinion_set_for_@ROOT
					}
					remove_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_member_opinion
					}
					clr_country_flag = league_of_nations_opinion_set_for_@ROOT
				}
			}
			
			set_variable = { league_of_nations_threat_from_war_peace = 0 }
			if = {
				limit = {
					has_war = no
					NOT = { check_variable = { league_of_nations_threat_from_war_peace = -0.4 } }
				}
				set_variable = { league_of_nations_threat_from_war_peace = -0.4 }
			}
			if = {
				limit = {
					has_defensive_war = yes
					has_civil_war = no
					NOT = { check_variable = { league_of_nations_threat_from_war_peace = -0.12 } }
				}
				set_variable = { league_of_nations_threat_from_war_peace = -0.12 }
			}
			set_variable = { league_of_nations_threat_from_offensive_war = 0 }
			if = {
				limit = {
					has_offensive_war = yes
					has_civil_war = no
					any_country = {
						has_country_flag = member_of_league_of_nations
						has_defensive_war_with = ROOT
					}
					NOT = {
						any_other_country = {
							has_volunteers_amount_from = {
								tag = ROOT
								count > 0
							}
						}
					}
					NOT = { check_variable = { league_of_nations_threat_from_offensive_war = 0.2 } }
				}
				set_variable = { league_of_nations_threat_from_offensive_war = 0.2 }
			}
			if = {
				limit = {
					any_other_country = {
						has_war = yes
						has_volunteers_amount_from = {
							tag = ROOT
							count > 0
						}
					}
					NOT = { check_variable = { league_of_nations_threat_from_offensive_war = 0.2 } }
				}
				if = {
					limit = {
						any_other_country = {
							has_volunteers_amount_from = {
								tag = ROOT
								count > 0
							}
							has_defensive_war = yes
						}
					}
					set_variable = { league_of_nations_threat_from_offensive_war = 0.12 }
				}
				if = {
					limit = {
						any_other_country = {
							has_volunteers_amount_from = {
								tag = ROOT
								count > 0
							}
							has_offensive_war = yes
						}
					}
					set_variable = { league_of_nations_threat_from_offensive_war = 0.42 }
				}
			}
			
			set_variable = { league_of_nations_generated_threat_rate = 0 }
			add_to_variable = { league_of_nations_generated_threat_rate = league_of_nations_threat_from_war_peace }
			add_to_variable = { league_of_nations_generated_threat_rate = league_of_nations_threat_from_offensive_war }
			
			add_to_variable = { league_of_nations_threat_change_days = 1 }
			if = {
				limit = {
					check_variable = { league_of_nations_threat_change_days > 6 }
				}
				set_variable = { league_of_nations_threat_change_days = 0 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_generated_threat_rate }
			}
			
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat > 100 }
				}
				set_variable = { league_of_nations_generated_threat = 100 }
			}
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat < 0 }
				}
				set_variable = { league_of_nations_generated_threat = 0 }
			}
			
			if = {
				limit = {
					has_country_flag = ITA_ETH_war_add_aggressiveness
				}
				clr_country_flag = ITA_ETH_war_add_aggressiveness
				add_to_variable = { league_of_nations_generated_threat = 10 }
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 1 }
			}
			
			if = {
				limit = {
					any_country = {
						ROOT = {
							has_country_flag = justifies_war_goal_against_@PREV
							NOT = { is_justifying_wargoal_against = PREV }
						}
					}
				}
				every_country = {
					limit = {
						ROOT = {
							has_country_flag = justifies_war_goal_against_@PREV
							NOT = { is_justifying_wargoal_against = PREV }
						}
					}
					ROOT = {
						clr_country_flag = justifies_war_goal_against_@PREV
					}
				}
			}
			
			if = {
				limit = {
					has_civil_war = yes
					NOT = { has_country_flag = civil_war_small_aggressiveness_penalty_for_annexing }
				}
				set_country_flag = civil_war_small_aggressiveness_penalty_for_annexing
			}
			if = {
				limit = {
					has_civil_war = no
					has_country_flag = civil_war_small_aggressiveness_penalty_for_annexing
				}
				clr_country_flag = civil_war_small_aggressiveness_penalty_for_annexing
			}
			
			if = {
				limit = {
					check_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown > 0 }
				}
				subtract_from_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown = 1 }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 50 }
					}
					subtract_from_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown = 1 }
				}
				if = {
					limit = {
						check_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown < 0 }
					}
				}
				if = {
					limit = {
						check_variable = { num_of_failed_league_of_nations_votings_against_us > 0 }
						NOT = { check_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown > 0 } }
					}
					set_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown = 0 }
					subtract_from_variable = { num_of_failed_league_of_nations_votings_against_us = 1 }
					if = {
						limit = {
							check_variable = { num_of_failed_league_of_nations_votings_against_us > 0 }
						}
						set_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown = 365 }
					}
				}
			}
		}
	}
	
	on_startup = {
		effect = {
			random_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = league_of_nations_events.1 }
			}
			every_country = {
				set_variable = { league_of_nations_generated_threat = has_added_tension_amount }
			}
		}
	}
	
	on_annex = {
		effect = {
			FROM = {
				if = {
					limit = {
						has_country_flag = leader_of_league_of_nations
					}
					clr_country_flag = leader_of_league_of_nations
					clear_global_event_target = league_of_nations_leader
					set_country_flag = was_leader_of_league_of_nations
					if = {
						limit = {
							any_other_country = {
								has_country_flag = member_of_league_of_nations
								has_capitulated = no
							}
						}
						random_other_country = {
							limit = {
								has_country_flag = member_of_league_of_nations
								has_capitulated = no
							}
							country_event = { id = league_of_nations_events.10 }
						}
						set_variable = { global.days_til_next_league_of_nations_election = 1 }
					}
					else_if = {
						limit = {
							NOT = {
								any_other_country = {
									has_country_flag = member_of_league_of_nations
									has_capitulated = no
								}
							}
						}
						set_global_flag = league_of_nations_dissolved
						every_country = {
							limit = {
								has_country_flag = member_of_league_of_nations
							}
							leave_league_of_nations_effect = yes
						}
						ROOT = {
							news_event = { id = league_of_nations_news_events.17 }
						}
					}
				}
				if = {
					limit = {
						has_country_flag = member_of_league_of_nations
					}						
					leave_league_of_nations_effect = yes
				}
				clr_country_flag = was_leader_of_league_of_nations
				
				# Anschluss voting:
				if = {
					limit = {
						original_tag = AUS
						is_historical_focus_on = yes
						ROOT = {
							original_tag = GER
							has_completed_focus = GER_anschluss
						}
					}
					MEX = {
						country_event = { id = league_of_nations_events.17 }
					}
				}					
			}
			
			if = {
				limit = {
					NOT = { has_country_flag = civil_war_small_aggressiveness_penalty_for_annexing }
				}
				set_temp_variable = { league_of_nations_threat_from_annexation_temp = 15 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_annexation_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 2 }
				set_variable = { last_annexed_country = FROM.id }
			}
		}
	}
	
	on_capitulation = {
		effect = {
			if = {
				limit = {
					has_country_flag = leader_of_league_of_nations
				}
				if = {
					limit = {
						any_other_country = {
							has_country_flag = member_of_league_of_nations
							has_capitulated = no
						}
					}
					set_variable = { global.days_til_next_league_of_nations_election = 1 }
				}
				else_if = {
					limit = {
						NOT = {
							any_other_country = {
								has_country_flag = member_of_league_of_nations
								has_capitulated = no
							}
						}
					}
					set_global_flag = league_of_nations_dissolved
					every_country = {
						limit = {
							has_country_flag = member_of_league_of_nations
						}
						leave_league_of_nations_effect = yes
					}
					FROM = {
						news_event = { id = league_of_nations_news_events.17 }
					}
				}
			}
			set_temp_variable = { league_of_nations_threat_from_capitulation_temp = -50 }
			add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_capitulation_temp }
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat > 100 }
				}
				set_variable = { league_of_nations_generated_threat = 100 }
			}
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat < 0 }
				}
				set_variable = { league_of_nations_generated_threat = 0 }
			}
			clr_country_flag = last_league_of_nations_threat_static_change
			set_country_flag = last_league_of_nations_threat_static_change
			set_variable = { last_league_of_nations_threat_static_change = 4 }
		}
	}
	
	on_uncapitulation = {
		effect = {
			if = {
				limit = {
					has_war = no
				}
				set_variable = { war_lost_cooldown_for_start_league_of_nations_voting = 730 }
				set_variable = { league_of_nations_generated_threat = 0 }
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 5 }
			}
		}
	}
	
	on_civil_war_end = {
		effect = {
			if = {
				limit = {
					FROM = { has_country_flag = member_of_league_of_nations }
				}
				join_league_of_nations_effect = yes
			}
			if = {
				limit = {
					has_country_flag = civil_war_small_aggressiveness_penalty_for_annexing
					has_capitulated = no
				}
				set_temp_variable = { league_of_nations_threat_from_annexation_temp = 5 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_annexation_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 7 }
			}
		}
	}
	
	on_declare_war = {
		effect = {
			# Winter War voting:
			if = {
				limit = {
					is_historical_focus_on = yes
					FROM = { tag = FIN }
					tag = SOV
					NOT = { has_global_flag = SOV_FIN_voting_happened }
					NOT = { has_country_flag = target_of_league_of_nations_voting }
				}
				FIN = {
					country_event = { id = league_of_nations_events.19 }
				}
			}
			if = {
				limit = {
					has_civil_war = no
				}
				set_variable = { war_lost_cooldown_for_start_league_of_nations_voting = 0 }
				set_temp_variable = { league_of_nations_threat_from_declare_war_temp = 10 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_declare_war_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 1 }
			}
			
			if = {
				limit = {
					has_idea = league_of_nations_defense_pact_target
					FROM = {
						has_country_flag = member_of_league_of_nations
					}
					any_country = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = FROM }
						NOT = { has_war_with = ROOT }
					}
				}
				FROM = {
					country_event = { id = league_of_nations_events.24 }
				}
			}
		}
	}
	
	on_puppet = {
		effect = {
			FROM = {
				set_temp_variable = { league_of_nations_threat_from_puppeting_temp = 5 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_puppeting_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 3 }
			}
		}
	}
	
	on_release_as_free = {
		effect = {
			FROM = {
				set_temp_variable = { league_of_nations_threat_from_releasing_temp = -5 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_releasing_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 6 }
			}
		}
	}
	
	on_peaceconference_ended = {
		effect = {
			set_variable = { league_of_nations_threat_from_state_annexations = 0 }
			if = {
				limit = {
					any_owned_state = {
						NOT = { has_state_flag = annexed_by_@ROOT }
						is_core_of = FROM
					}
				}
				every_owned_state = {
					limit = {
						NOT = { has_state_flag = annexed_by_@ROOT }
						is_core_of = FROM
					}
					set_state_flag = annexed_by_@ROOT
					ROOT = {
						add_to_variable = { league_of_nations_generated_threat = 2 }
						add_to_variable = { league_of_nations_threat_from_state_annexations = 2 }
					}
					set_variable = { previous_owner = FROM.id }
				}
				if = {
					limit = {
						country_exists = FROM
					}
					clr_country_flag = last_league_of_nations_threat_static_change
					set_country_flag = last_league_of_nations_threat_static_change
					set_variable = { last_league_of_nations_threat_static_change = 8 }
				}
			}
		}
	}
	
	on_justifying_wargoal_pulse = {
		effect = {
			if = {
				limit = {
					any_country = {
						ROOT = {
							is_justifying_wargoal_against = PREV
							NOT = { has_country_flag = justifies_war_goal_against_@PREV }
						}
					}
				}
				every_country = {
					limit = {
						ROOT = {
							is_justifying_wargoal_against = PREV
							NOT = { has_country_flag = justifies_war_goal_against_@PREV }
						}
					}
					ROOT = {
						set_country_flag = justifies_war_goal_against_@PREV
						set_temp_variable = { league_of_nations_threat_from_wargoal_temp = 3 }
						add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_wargoal_temp }
					}
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 9 }
			}
		}
	}
	
	on_call_allies = {
		effect = {
			if = {
				limit = {
					has_offensive_war = yes
					any_country = {
						has_defensive_war_with = ROOT
						NOT = { has_war_with = FROM }
					}
				}
				every_country = {
					limit = {
						has_defensive_war_with = ROOT
						NOT = { has_war_with = FROM }
					}
					set_country_flag = could_be_called_against_this_@FROM
				}
				FROM = {
					country_event = { id = league_of_nations_events.22 hours = 1 }
				}
			}
		}
	}
	
	on_join_allies = {
		effect = {
			if = {
				limit = {
					FROM = { has_offensive_war = yes }
					any_country = {
						has_defensive_war_with = FROM
						NOT = { has_war_with = ROOT }
					}
				}
				every_country = {
					limit = {
						has_defensive_war_with = FROM
						NOT = { has_war_with = ROOT }
					}
					set_country_flag = could_be_called_against_this_@ROOT
				}
				country_event = { id = league_of_nations_events.22 hours = 1 }
			}
		}
	}
	
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					NOT = { has_war_with = FROM }
					FROM.FROM = {
						is_owned_by = ROOT
						NOT = { is_core_of = ROOT }
					}
					country_exists = FROM
					FROM = {
						NOT = { has_country_flag = has_war_with_@ROOT }
					}
				}
				set_temp_variable = { previous_owner_of_peacefully_annexed_state = FROM.id }
				FROM.FROM = {
					set_state_flag = annexed_by_@ROOT
					set_variable = { previous_owner = previous_owner_of_peacefully_annexed_state }
				}
				set_temp_variable = { league_of_nations_threat_from_peaceful_state_annexation_temp = 3 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_peaceful_state_annexation_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 12 }
			}
		}
	}
}