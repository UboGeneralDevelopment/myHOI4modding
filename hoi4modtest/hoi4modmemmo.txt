
スコープとか、コマンドとか、その辺の定義とかを読み解く。

editted from web browser


ガイド

ゲームファイルはいじくるな
よいエディタを使おう
バニラファイルの上書きは最小限に
よいマージツールを使おう？
バックアップしよう
txtファイルはUTF-8で書こう
ローカライズファイルymlにはUTF-8-BOMを使おう
インデントを使おう
#で始まるコメント行を用いよう
デバッグモードをつかってデバッグをがんばろう

マイナーMODとメジャーMOD
メジャーMODにおいては、MODデータやセーブデータが混じらないようパスを好感してしまうこともあるので注意。

MODでの処理
ゲームの動きを構成する重要な要素は、以下のものに分類される。
スコープ
エフェクト（コマンド）
モディファー
トリガー

これらに加え、その効果を補強するものとして以下の要素がある。
定義
ローカライズ
変数

実際には上記の要素を組み合わせて、MODの実態を構成する。代表的なものには
AI　ブックマーク　建物　コスメティックタグ　国　師団　ディシジョン　装備　イベント　アイデア　イデオロギー　国家方針　資源　技術
などがある。

まずMOD要素について

スコープ
効果が実装される範囲のこと。
エフェクトは特定のスコープの中で実行され、指定されたスコープに効果を及ぼす。
スコープには主に、国家　ステート　リーダーなどが含まれる。効果は、指定されたスコープの中でのみ効果を発揮する。
各スコープにはカテゴリー分けされた数多くのパラメータが設定されており、これに影響を及ぼす。
とはいえ、実際には効果範囲はそのほかハードコードによっても縛られており、スコープのみに依存するわけではない。


エフェクト
何らかの効果を実行させるコマンド。ある一つのスコープのなかで実行され、自分やほかのスコープに対して影響を与える。
スコープ内部のパラメータを実際に変更させることが主な働き。効果範囲は指定されたスコープに限定される。
コマンドが影響するパラメータはスコープごとに大量に存在する。


モディファー
あるスコープの中のあるパラメータに対して効果を及ぼす点ではエフェクトに似ているが、何かの実体に元づく修正。
モディファーはそれ自体の効果の情報を保存しており、効果を修正したりすることができる。
モディファーの種類もいっぱいある。

トリガー
エフェクトやモディファーが適用される条件を指定する。スコープの中で条件が検討され、エフェクトが実行される。

以上が基本的な構成要素である。
これらの働きをサポートするために、以下の要素が用意されている。

定義
定義された数字を格納している。国に共通することなど、繰り返し用いられる数字などが定義づけられている。

変数
MODによって定義される。好きな数字や文字を格納できる。

ローカライズ
言語を変えて表示したいときに、置き換える部分をこれで置き換える。

などと色々書いたが、プログラミング感覚だと少しちがう。
ゲーム中のオブジェクトの書き方にはそれぞれ暗黙の形式があり、それに則って書かなければならない。
基本的には元ファイルにある書き方がただしく、それにならうということ。
とはいえ、異なる欠き方でも機能することもあるため、そのあたりの法則性は考えなければならない
また、ウィキの内容もすべてではなく、書き方にはいろいろある。



戦闘修正メモ
add temporaly buffもしくはunit_modifierをもちいる
特定師団タイプに影響する効果は、師団タイプにより、構成大隊によらない
防御力は突破と防御双方に適用される。攻撃もハード、ソフト双方に適用。
地形別に効果を与えることはでき、師団タイプごとに効果も与えられるが、装備には影響できない。
効果を検証中

modの案
###砲撃、パンツァーカイルなどの能力MOD
ドクトリン研究によってアンロックされる。
準備砲撃　計画が必要。砲兵師団の防御、攻撃up、砲兵を消費
戦車攻撃?　平地での速度および攻撃up、戦車師団の攻撃防御up




###民間工場資源消費mod

国内資源から装備の資源消費を引き、あまりの資源が民間に供給されていると仮定し、民間工業の数とあまり資源の量に応じて効率を減らす。
全体の建設速度ファクターから資源不足ファクターを引き、それをもとに資源不足ファクターを再計算する。再計算のタイミングをどうするか。
民間工場の数に応じて必要資源量を各資源について計算、最低限度充足している資源割合が最終的な建設速度となる。
資源あまりも計算しておく。
国ごとの民間資源消費の違いは国民精神か政治顧問にて表現する。最終的にはダイナミックに表現したい。

使えそうなゲーム内パラメタ
resource   (usage resource@steel or other resources)
resource_consumed (usage resource_consumed@steel or other resources)
resource_exported (usage resource_exported@steel or other resources)
resource_imported (usage resource_imported@steel or other resources)
resource_produced (usage resource_produced@steel or other resources)

num_of_available_civilian_factories
num_of_available_military_factories
num_of_available_naval_factories
num_of_civilian_factories
num_of_civilian_factories_available_for_projects
num_of_controlled_states
num_of_factories
num_of_military_factories
num_of_naval_factories

モディファー
production_speed_buildings_factor　建設速度全体へのボーナス　production_speed_buildings_factor = 0.1
consumer_goods_factor　消費財の割合変化
production_oil_factor　石油のみに適用される生産ボーナス。



ゲーム内の建設速度ファクターはそれはそれとしてほっておく。国ごとの最低建設速度とみよう

開発順。

まず、ゲーム内変数を表示する。
資源あまりに応じて建設速度が変化させられるかを検証する
