経済システムの大改造

POPやJOBにもとづく経済出力と資源算出。
コア、非コアに依存しない段階的なステート開発。多分こっちが優先。



############ステート管理#################
非中核ステートの段階的統合

バニラ版の扱い。占領状態はいくつかに分かれる。

自国の中核州　完全コントロール
自国の植民地　人的=pop*徴兵率*徴兵可能要因*0.02(植民地ペナ)、共有スロット半分
占領した他国の中核州　工場数、人的、資源は占領政策によって減少
占領した他国の植民地　工場数、人的、資源の占領政策の減少に加え、共有スロット半分。

占領変化は以下に分かれる
平時：所有中核→他国の植民地　ペナ変化：なし→人的、スロット、
平時：所有中核→他国の中核　ペナ変化：なし→なし
平時：所有植民地→他国の植民地　ペナ変化：人的、スロット→人的、スロット
平時：所有植民地→他国の中核　ペナ変化：人的、スロット→なし
戦時：所有中核→他国の植民地　ペナ変化：なし→人的
戦時：所有中核→他国の中核　ペナ変化：なし→なし
戦時：所有植民地→他国の植民地　ペナ変化：人的、スロット→人的、スロット
戦時：所有植民地→他国の中核　ペナ変化：人的、スロット→なし

非中核、中核の共有スロット半分の扱い。
自国の中核州でなければ、占領した土地のスロットはすべて半減する。
on_state_control_changed
FROMが中核州を持ち、ROOTが中核州を持たないかつ所有者でなければ、
スロットを減らし、不当な占領FLAGを立てる。
on_state_control_changedで、不当な占領FLAGがあり、ROOTが所有者か中核州持ちなら
スロットを増やし、FLAGをはずす。


統合システム
まず、non_coreのスロット制限は撤廃
coreそのものはstate資源の利用に影響は与えず、そのほかが影響する。
各statesは各国に対するstate_integration_levelを持ち、これが資源利用に影響する。
とりあえずはシンプルにintegration_levelにスロットと人的が比例するシステムに

state_integration_level@TAG　統合レベル　1~9
daily_integration_point@TAG　一日当たりの進行度：消費財、インフラ、建造物、ステートカテゴリーによる
daily_integration_progress@TAG　一日当たりの進行度パーセント表記
current_integration_point@TAG　現在の進行度
current_integration_progress@TAG　現在の進行度パーセント表記
state_integration_point_cost　統合コスト　人口比例

startup_integration_level

integration_levelは共通スロット数を変化させる

local_mobilization_level
non_core	core	shared_slots
0 2%		50%
1 5%		65%
2 10%		80%
3 20%		95%

4	30%	100%
5	45%
6	60%
7	75%
8	90%
9	100%

claimがあればレベル1からスタート
coreがあればレベル4からスタート

スタートアップ時のポイントはコアはステートカテゴリーの基本値+1、最低レベルは4
植民地はステートカテゴリーの基本値の半分、最大レベルは3


支配権が移った時点で、まず中核、請求権の有り無しを確認する。
次に統合レベルを確認し、中核、請求権最低値と現在の統合レベルを見てより高い統合レベルを持っているほうを採用する。
前の支配者のmodifierを削除し、新しい支配者のmodifierを付け加える。

レベルの手動の上下は完全支配下でレジスタンスレベルが低いときのみ可能

0	wasteland 最大　仏アフリカ2M
0	tiny_island
0	enclave
1	small_island　okinawa 0.6M
1	pastoral ベルギーコンゴ6M
2	rural　最大インドBihar36.61M
4	town　山東３８M
5	large_town　3.5Mアルゼンチン
6	city 最大53M四川
8	large_city 上海17M
10	metropolis 関西11M
12	megalopolis 13M関東




############ステート管理advaced＋POP＋Civilian_Economy+Trade#################
popなどを基にしたstate経済システムを構築する。
stateのeconomyと、そこから政府がどれだけそれを吸い上げられるかを重視する

stateのステータス

vp　勝利点。（provinceベース。政治的価値）
core, claim, non_core　保有の正当性
natural_resources　問答無用でわいてくる資源
population　人口
state_category　スロット数基本値などを決める。これを現地の経済的価値の根本的基本値にするといい。
buiding_level　建築物のかず。政府が把握している工業力ベース。
　インフラ
　民需
　軍需
　造船


コンセプト再構成

＃coreとnon_coreの違い。
そのstateの住民がcore国に属するという自認と、そのstateがcore国に属するという国際的評価を示す。
non_core_stateは、stateの人々も国際社会も保有国の一部だとは認識してない。

＃state_category
スロット数基本値、開発可能限界を決める。現地の民間経済価値の基本値の一つをなす。
ステートの発展具合を示す指標の一つだが、スロット数はあくまでスロット数。

#building
実際のICを提供する。政府の把握している工業力ベースと考えられる。
バランスとしては、stateごとに稼働可能なfactoryの限界値があり、それを超えるとlocal_factoryやlocal_resourcesが低下していく。
十分なバックグラウンドというのは、民間の経済力に依存し、国の経済力にはあまり依存しない。
高い消費財と多くの発展した土地が民間経済力の基礎となる。

＃Population
人口

#modifier
確実に使える効果
local_resources
local_manpower
local_non_core_manpower
local_factories：dockyardとfactoryの数を増減する。増減は最終的な工場数にのみ反映され、スロットには現れない。
local_building_slots_factor

使えるかもしれない効果
resistance_tick
local_supplies
local_intel_to_enemies
local_factory_sabotage
attrition
local_building_slots

つかえたらいいなあ
local_monthly_population

チャートは使えないのでパーセントのリストでがんばる。
デフォでは建設が進めば進むほど工業力強化が加速する。毎年～～％という感じになる。このペースを落としたい。
軍事工場は、すべて国家管理のものと仮定、コストはすべて国が支払う。
工場の量はステートごとに効率が変わる。建設数が少なくとも、local_factoryのmodifierで工場数を増やせる。
国家レベルではfactory_outputが役に立つ。

新規state_stats
civilian_economy
factory_efficiency
core_conscription
non_core_conscription
integration_level
state_category
など

popsの影響範囲。徴兵、州経済、政治




第一義に職業で分類
農民（経済にあまり貢献しない）　労働者（生産経済に貢献）　公務員（経済、政府効率に貢献）　投資家（経済効率に貢献）
職業ごとの違い

農民（わずかな経済活動のほかには何もしない）（）
労働者（工業と資源生産を担う。経済価値も生む）（）
公務員（現地の種々の政府管理に影響する）（）
投資家（経済価値を生み、工業生産発展に影響する）（）

各職業ごとでnationalityに分類
nationalityごとに以下のstatsを持つ
citizenship 市民権。
裕福度　裕福度。職業変更の可能性や現状満足度に影響。
生産性　生産性。州経済に影響
government_control　政府のコントロールがどれだけきかせられるか。強制労働や徴兵に影響
忠誠、反逆度　反逆度。

coreは1st citizenshipの国民の数に依存する。

これによって何ができる？
人は多いが生産性はくそ
二流市民が三流市民を抑圧
政府にコントロールされているが反逆度は高い
裕福だが生産性は低い
生産性はくそだが政府コントロールはしっかり


state stats
既存のstate_stats
#state_category
#core, claim, control, own
#population #resistance #natural_resources 
#state_buildings #state_shared_buildings
#province_buildings #province_terrain #province_vp

新規state_stats
#optimum_factories
#factory_efficiency (industrial_complex, arms_factory, dockyards)　
#manpower_efficiency　
#resource_efficiency　
#civilian_economic_activity　
#government_control　

工場の扱い
動くためには労働者POPがいる。

労働者POPはlocal_economy従事者と工場労働者、無職に分かれる。
平均生産性が存在し、それによって平均必要物資と必要賃金が決まる。
local_economyと工場が賃金を提供し、足りない、余りで労働者POPの生産性が変化する。
工場は常に必要なだけの賃金を支払うが、一部の法律やイベントでこの量が変化する。。
local_economyで金が余って生産性が上がれば、その分多くのコストを支払わなければならない。

民需工場の代わりに公共投資がある。これは民需工場を増やさないが、現地の経済活動をブーストする。
民需や軍需を立てすぎると国家支出がくずれて死ぬ。AIはこれで死にかねないので別の方法を考えよう。

消費財の民需で雇用量をコントロール。
消費財として使われている民需は民間経済になんかしらのボーナス。
建設した民需工場を投資へとconvertする機能。


賃金は消費財工場とは別の形で現れる。

local_economyは必要ならばマップ外の民需工場としてボーナスをもたらすことができる。

POPの生産性によって雇用コストがあり、工場は許容する分だけPOPを雇う。


雇われなかったPOPは次第に生産性を低下させる原因となる。


工場の雇用可能量は工場のバランスに依存する。
工場のバランスは、出力の売り上げに依存。赤字だと雇用量を減らし、出力を減らす。

工場のわりにPOPが少なければ稼働率が低下し。POPがおおかったり、POP生産性が高ければある程度は上昇する。
このあたり、building_levelのvariablesがどのように動作するか見る必要がある。

工場があればPOPは自動的に工場に配属され、なければlocal_industryに配属される。



経済価値
工業出力とは別扱い。国の直接介入は投資のみ。
文字通り地域の経済活動の指標。
産出はPOPにより、消費もPOPによる。余剰は税として取られた後POPの懐に入る。
余剰価値は主に投資に用いられる。


consumer_goodsの計算。国家の維持費の役割を持つ
国家の維持費
軍需工場、造船所とそこのPOPの数
軍隊の規模
政府の種々の活動
がひかれる。
余った民需からさらに国家建設使用分が捻出される

trade law
economy law
conscription law


###########ステート管理画面設計方針###############
ステート基本画面
基本の画面、いくつかの新機能が見れる

ステートPOP詳細画面
詳細画面、POP管理などはここで行う。

ステートPOP一括管理画面
ステートのリストでステートの新プロパティーを一覧でき、そのステートへと移動できる。ハイライト機能はディシジョン限定か？
このインターフェイスを早期試作したい。
league of nationsのリストはダイナミックではないので、MtGを待つ。
ここでは基本的に情報を確認できるのみで、実際の作業は行えなくてもよい。
実際の作業はステートに移動するか、建設画面でボタンポチポチする


#############資源、貿易、経済################
ゲーム内の経済資源
バニラ版の原材料、すべて出力的。貯蔵不能
民間工場
軍事工場
天然資源
バニラ版の生産財
建物建築　出力的　貯蔵不能
装備生産　消費的　貯蔵可能


貯蔵可能資源と貯蔵不能資源に分ける。また貿易システムも変える。


目的別：資源の使われ方による分別

民間最終消費物資
軍事最終消費物資
工場原材料

生産方法別：生産方法による分別
天然資源
軍事工場生産物
民需工場生産物






