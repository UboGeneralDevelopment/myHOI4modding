
##############Localisation############################

ローカリゼーションではゲーム内での文字表記が定義する。

ゲーム内の文字表示は２種の記述法によってきめられている。GUI記述とローカリゼーションキー記述だ。

GUI記述はそのままの意味であり、ゲーム内インターフェイスファイルにかかれたテキスト記述がそのまま表示される。
これはinterfaceのguiファイルの各elementのtextに表記されている。

ローカリゼーションキー記述は（以後キーと呼称）、ゲーム内ファイルの各種テキストをキーとして、別途キーファイルにおいてその内容を記述する。

ゲーム内テキストのほとんどはキー記述だが、GUIファイル内で記述されたテキストはキー扱いではないので注意。

そもそもGUI記述はインターフェイスファイルに書かれているため、インターフェイスファイルにない各ゲーム内システムのテキストを書くことはできない。
また、表記したものはguiファイル内にばらばらに存在することになるため、基本的に変化しないテキストの表記にのみ用いられる。

キー記述は基本的にすべてに適用することが可能で、GUIファイルのテキストを含む、あらゆるゲームシステムのIDがキーで判別されている。
このキーに対応するテキストをローカリゼーションファイルに書くことでテキスト表示が完成する。


＃静的キー
基本はまず静的なキー表示で、固定のキーに対して固定のテキストが対応する。
基本記述はこう。

l_english:
 infantry_equipment: "Infantry Equipment"
 infantry_equipment_short: "Inf. Eq."
 infantry_equipment_desc: "This is infantry equipment"

キーの後ろに_descや_shortなどを記述することで、使用する場所による属性を付与できる。これは後半の動的キーで役に立つ。

#特殊文字：書式調整　\n　などで改行を示す
#特殊文字：文字調整　§~~~~§!の間に色やフォントの変化をつける。
#特殊文字：アイコン表記　￡のあとは対応するテクスチャーを張り付ける。



＃キーの番号切り替え

l_<language>:
 <key>:<number> "Text here"
このnumberの切り替えも可能。何に使うのか今のところよくわからない。



＃動的キー

動的キーは、キーに対応するテキスト状において使用可能な関数で、テキストを必要に応じて動的に変更する事ができる。
基本的に、特定のスコープに対してそのスコープの特定のキーを取得し、そのテキストを対応させる働きをする。
備え付けの関数と、scripted_localisationが存在する。
基本形は

[SCOPE.Defined_text]

であり、関数内で指定されたスコープに対して、関数に見合うキーをみつけてきて、[]をキーで置き換える働きをする。
つまり、キー内において[localisation_key]を書くことでキー記述に別のキーを組み込むことが可能になる。
もちろん静的では意味がないので、備え付けられている関数か、scripted_localisationを用いる。

備え付け関数一覧はこちら。

GetName　スコープのキーを取得　[ROOT.GetName]でROOTの国名のキーを取得する。
GetNameDef
GetAdjective
GetAdjectiveCap
GetLeader
GetRulingParty
GetRulingIdeology
GetRulingIdeologyNoun
GetPartySupport
GetLastElection
GetManpower
GetFactionName
GetFlag
GetNameWithFlag
GetCommunistParty
GetDemocraticParty
GetFascistParty
GetNeutralParty
GetDateText
GetYear
GetHerselfHimself
GetHerHis
GetSheHe
GetSheHeCap
GetRank
GetManchuriaPuppet

よくわからんものも多い。
variableを用いることも可能であり、そのときは
[?variable_name]となる。variableがスコープを保存しているならばもちろん上記の関数も使える。
scripted_guiでは[!~~~]で効果が取得できる？


#scripted_Localisation
[]で囲んだキーを動的に変更する。
順番としては、scripted_localisationにてまず変動させたいキーを定義し、変動する条件とそれぞれの変動後のキーを指定する。
まず、ローカリゼーションにおいて
 localisation_key_1:0 "this is key 1"
にたいして
 localisation_key_2:0 "this is key 2"
を

 localisation_key_1:0  "key will display this sentences [ROOT.SCRIPTED_LOCAISATION_KEY]."
という形で挿入できる。これの何がうれしいかというと、localisation_key_2をdefined_textにすれば
scripted_localisationにおいて別のlocalisation_keyで置き換えることができる。

defined_text = {
	name = SCRIPTED_LOCAISATION_KEY
	text = {
		trigger = { }
		localisation_key = KEY
	}
	text = {
		trigger = { }
		localisation_key = KEY
	}
}

をまず書く。
こののち、ローカリゼーションファイルにて、対応させたいキーのテキストに[SCRIPTED_LOCALISATION_KEY]を書けば、
キーがその通りの別のキーへと変換され、結果別の文章へとおきかわる。

基本的にはlocalisationにおいて書かれる文章を状況によって変えたいときに用いる。特殊記号などもこれで書き換えられる。
ツールチップで条件を満たす、満たさないで表記を変えたいときなどに使える。


現在のところ、システム的には
scripted_GUIのpropertiesとMtGのmeta_effectsとmeta_triggerにおいてこれを使うことが可能であり。だいぶcommandの自由度が増す。








