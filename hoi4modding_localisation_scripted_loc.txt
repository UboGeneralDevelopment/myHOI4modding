
##############Localisation############################

ローカリゼーションではゲーム内での文字表記が定義する。

ゲーム内の文字表示は２種の記述法によってきめられている。GUI記述とローカリゼーションキー記述だ。

GUI記述はそのままの意味であり、ゲーム内インターフェイスファイルにかかれたテキスト記述がそのまま表示される。
これはinterfaceのguiファイルの各elementのtextに表記されている。

ローカリゼーションキー記述は（以後キーと呼称）、ゲーム内ファイルの各種テキストをキーとして、別途キーファイルにおいてその内容を記述する。

ゲーム内テキストのほとんどはキー記述だが、GUIファイル内で記述されたテキストはキー扱いではないので注意。

そもそもGUI記述はインターフェイスファイルに書かれているため、インターフェイスファイルにない各ゲーム内システムのテキストを書くことはできない。
また、表記したものはguiファイル内にばらばらに存在することになるため、基本的に変化しないテキストの表記にのみ用いられる。

キー記述は基本的にすべてに適用することが可能で、GUIファイルのテキストを含む、あらゆるゲームシステムのIDがキーで判別されている。
このキーに対応するテキストをローカリゼーションファイルに書くことでテキスト表示が完成する。


＃静的キー
基本はまず静的なキー表示で、固定のキーに対して固定のテキストが対応する。
基本記述はこう。

l_english:
 infantry_equipment: "Infantry Equipment"
 infantry_equipment_short: "Inf. Eq."
 infantry_equipment_desc: "This is infantry equipment"

キーの後ろに_descや_shortなどを記述することで、使用する場所による属性を付与できる。これは後半の動的キーで役に立つ。

#特殊文字：書式調整　\n　などで改行を示す
#特殊文字：文字調整　§~~~~§!の間に色やフォントの変化をつける。
#特殊文字：アイコン表記　￡のあとは対応するテクスチャーを張り付ける。



＃キーの番号切り替え

l_<language>:
 <key>:<number> "Text here"
このnumberの切り替えも可能。何に使うのか今のところよくわからない。



＃動的キー

動的キーは、キーに対応するテキスト状において使用可能な関数で、テキストを必要に応じて動的に変更する事ができる。
基本的に、特定のスコープに対してそのスコープの特定のキーを取得し、そのテキストを対応させる働きをする。
備え付けの関数と、scripted_localisationが存在する。
基本形は

[SCOPE.Defined_text]

であり、関数内で指定されたスコープに対して、関数に見合うキーをみつけてきて、[]をキーで置き換える働きをする。
つまり、キー内において[localisation_key]を書くことでキー記述に別のキーを組み込むことが可能になる。
もちろん静的では意味がないので、備え付けられている関数か、scripted_localisationを用いる。

備え付け関数一覧はこちら。

GetName　スコープのキーを取得　[ROOT.GetName]でROOTの国名のキーを取得する。
GetNameDef
GetAdjective
GetAdjectiveCap
GetLeader
GetRulingParty
GetRulingIdeology
GetRulingIdeologyNoun
GetPartySupport
GetLastElection
GetManpower
GetFactionName
GetFlag
GetNameWithFlag
GetCommunistParty
GetDemocraticParty
GetFascistParty
GetNeutralParty
GetDateText
GetYear
GetHerselfHimself
GetHerHis
GetSheHe
GetSheHeCap
GetRank
GetManchuriaPuppet

よくわからんものも多い。
variableを用いることも可能であり、そのときは
[?variable_name]となる。variableがスコープを保存しているならばもちろん上記の関数も使える。
scripted_guiでは[!~~~]で効果が取得できる？


#scripted_Localisation
[]で囲んだキーを動的に変更する。
順番としては、scripted_localisationにてまず変動させたいキーを定義し、変動する条件とそれぞれの変動後のキーを指定する。
まず、ローカリゼーションにおいて
 localisation_key_1:0 "key 1"
 localisation_key_2:0 "key 2"
を定義する。

そしてこの二つのキーを用いて、
scripted_localisationにおいてDefined_textを次のように条件によって置き換える指定を行う。

defined_text = {
	name = DefinedText
	text = {
		trigger = { <triggers> }
		localisation_key = localisation_key_1
	}
	text = {
		trigger = { <triggers> }
		localisation_key = localisation_key_2
	}
}

そして最後に、置き換えたいテキストをDefinedTextを用いて記述する。

localisation_key_3:0 "this is key 3 that displays key 1 or key 2, currently [ROOT.DefinedText]"

これによって、localisation_key_3は
this is key 3 that displays key1 or key2, currently key1
this is key 3 that displays key1 or key2, currently key2
に条件によって置き換えられる。

ローカリゼーション以外、interfaceのguiフォルダのtext記述を直接置き換えることも可能。
text = "this sentence is dynamic [ROOT.DefinedText] "

さらに、一部のシステムにおいて、システムの記述をダイナミックに書き換えることも可能。
今のところ
scripted_GUIのproperties
でのみ実装されている。
将来的にはMtGのmeta_effectsとmeta_triggerにおいても実装が予告されている。








